package dp

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

// go test -v -count=1 ./dp/ -run ^TestMinimumMountainRemovals$
func TestMinimumMountainRemovals(t *testing.T) {
	for _, tc := range []struct {
		nums  []int
		count int
	}{
		{nums: []int{1, 3, 1}, count: 0},
		{nums: []int{2, 1, 1, 5, 6, 2, 3, 1}, count: 3},
		{nums: []int{9, 8, 1, 7, 6, 5, 4, 3, 2, 1}, count: 2},
		{nums: []int{100, 92, 89, 77, 74, 66, 64, 66, 64}, count: 6},
		{nums: []int{1, 16, 84, 9, 29, 71, 86, 79, 72, 12}, count: 2},
		{nums: []int{4, 5, 13, 17, 1, 7, 6, 11, 2, 8, 10, 15, 3, 9, 12, 14, 16}, count: 10},
		// {nums: []int{631354, 3499384, 7933908, 10172861, 11211474, 11413777, 14308299, 15652969, 18613108, 22344003, 28640558, 35292707, 44201100, 51436405, 55552760, 58799877, 60305481, 60359701, 61696683, 62397897, 66105145, 66259511, 66994742, 70356580, 77932869, 80281443, 90137772, 97668205, 103041024, 117360139, 526285164, 121881576, 129907690, 132103203, 142826430, 146221540, 157576170, 158209010, 162826609, 165186362, 172214208, 175980982, 181016355, 185273718, 193145550, 193650708, 198039565, 199145689, 199993138, 201997985, 212592393, 222630142, 224554075, 224710879, 226193979, 227404050, 227483385, 236922638, 241526852, 741082601, 243117423, 243790258, 246501441, 252383721, 257751172, 258934388, 259505049, 262486753, 275729500, 279875027, 285817286, 332714554, 290743414, 298150387, 299827934, 300540791, 300746907, 303342685, 314680955, 320600550, 323890101, 323998054, 333641498, 334756068, 423820592, 335973012, 351466576, 352877673, 353522059, 363287095, 365895468, 372881776, 376320484, 376743545, 378397031, 392537985, 397827247, 404324208, 409137402, 410602185, 416294962, 418312185, 424005362, 424383105, 425376031, 427516263, 433716683, 434080753, 434551419, 445979847, 454247570, 456133317, 465157221, 469242002, 473202671, 478769937, 481133070, 483068522, 483359881, 484848331, 485654001, 487445030, 488183843, 492576669, 500330612, 503323821, 507426612, 515653805, 518745766, 529065452, 531089571, 533035540, 536562901, 539541300, 542261099, 542547781, 542890362, 547730896, 550779455, 551621615, 555340295, 558414340, 569188253, 571306568, 573564953, 577293014, 578301419, 579302458, 589981288, 594726371, 414173323, 606134833, 612756493, 616239031, 616717773, 619131859, 620075254, 621371703, 627991881, 631097567, 631702369, 638554278, 638932273, 640694122, 642464211, 642885333, 645427276, 647159594, 651663298, 655940459, 655998658, 661042623, 672810992, 675427411, 678661432, 680126904, 681459619, 682181037, 683895204, 691007896, 691729016, 692799037, 694575408, 703791808, 704681395, 709786064, 712355442, 714088950, 719362547, 720483595, 723091930, 732710875, 733907489, 734111749, 739602150, 746133872, 747737967, 748423723, 750287465, 759839546, 194298057, 761063260, 764978711, 765136754, 775572825, 779174039, 786756272, 794395209, 801580656, 801918355, 806232307, 808497245, 810251463, 818109655, 819085250, 827051326, 827284902, 829640430, 830342430, 849866729, 851346460, 855234298, 857484495, 864726767, 866061169, 866075643, 869455452, 871615266, 873534923, 881958596, 881990395, 882219144, 884415533, 892638089, 893487147, 894141293, 894366934, 896321536, 903547252, 908235821, 908899333, 913589737, 921283281, 923415907, 924121335, 927659359, 934167841, 949799900, 950798241, 951479482, 952910772, 952916398, 957281392, 962472452, 963280250, 963541741, 967093486, 971378529, 984409497, 988153940, 676847145, 990784267, 993902734, 995425553, 998333294, 997133527, 994819390, 989778393, 972098903, 963736326, 909590034, 959780017, 958694908, 947097986, 946707086, 930445777, 929272832, 924095273, 918077980, 909988895, 882402576, 902516479, 901308180, 898261285, 895822292, 893828270, 893562587, 888811739, 886683273, 885265900, 883801483, 880428812, 876089551, 872711518, 865813695, 865640177, 858451645, 849725937, 844356250, 826654544, 825506626, 813217522, 812974502, 810012499, 808567962, 803217553, 800019723, 781750991, 780872225, 772955563, 771420007, 768674713, 764542712, 764360470, 763871084, 757950437, 755350118, 751650414, 749899942, 746081133, 745240071, 741447478, 728210520, 728053664, 726354267, 725678245, 724837952, 713259903, 703240190, 696465221, 696090969, 687484586, 687010115, 683877214, 408307871, 682993789, 682751060, 681810905, 679797922, 678780484, 673143597, 654790867, 367771073, 650697865, 640056619, 638671494, 630705836, 627043947, 626630245, 625340695, 624783956, 611006744, 606594490, 598019968, 596913614, 596396293, 590497719, 570735657, 570614153, 565201001, 548674461, 545644612, 538748943, 538441754, 537002284, 529603422, 521217742, 520573740, 517860706, 514266036, 510993895, 491985915, 481849682, 479670148, 475236978, 474141062, 473537702, 470391170, 469606259, 462533231, 461345390, 457468362, 455091945, 454501820, 453940071, 451514784, 450902220, 444087634, 442968023, 439794026, 438783887, 438309871, 437284668, 433478655, 431802974, 425882261, 418284226, 413020491, 411803487, 401983866, 400830469, 396656906, 395196454, 390390443, 385768813, 374405408, 371648868, 368813797, 366471101, 361694078, 354465310, 353820384, 351298487, 351195176, 342897079, 339540678, 338569966, 334528223, 329900217, 318004028, 317305440, 306726346, 301971650, 301362365, 296658953, 292291097, 292235592, 291582776, 3215447, 286811755, 278597214, 273322351, 258872953, 256680465, 255614653, 247370864, 246242855, 239203356, 237500831, 231478739, 228129732, 223522053, 213018153, 207215770, 204553012, 200592356, 198140555, 197096312, 196023143, 192155382, 190757589, 189201193, 186215002, 185379004, 183071115, 177970734, 171292731, 146874529, 140162469, 138674825, 129750192, 127380606, 127285384, 125711767, 123723637, 121638972, 116770437, 442826658, 110339244, 106452060, 89168999, 85400066, 77730317, 64130478, 60402623, 56706931, 50007445, 49089005, 43249420, 40181514, 39753300, 37937557, 37769177, 36016028, 30172704, 29935802, 23278307, 20703791, 19709795, 12829600, 9268553, 8344014, 6518224, 2068111, 1461077}, count: 13},
	} {
		count := minimumMountainRemovals(tc.nums)
		assert.Equal(t, tc.count, count)
	}
}
